<!DOCTYPE html>

<html lang="pt-BR" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Fórum</title>
    <link href="/estilos/forum.css" rel="stylesheet">
</head>
<body>
  
 <section layout:fragment="content">
        <div class="container">

               
            <h2 class="h4 bg-primary mb-0 p-4 rounded-top text-white" text-white>Fórum de duvidas
            </h2>
            
            
            
            
            


		<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		  
		    <div class="modal-content">
		    
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Nova pergunta</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      
		      <div class="modal-body">
		      
		        <form id="formPergunta" method="post" th:action="@{/forum/salvar}" th:object="${postagem}">
		        	<input type="hidden" th:field="${postagem.id}">
		          <div class="mb-3">
		            <label for="recipient-name" class="col-form-label">Titulo:</label>
		            <input type="text" class="form-control" id="recipient-name" th:field="${postagem.titulo}">
		          </div>
		          <div class="mb-3">
		            <label for="message-text" class="col-form-label">Descricao:</label>
		            <textarea class="form-control" id="message-text" th:field="${postagem.conteudo}"></textarea>
		          </div>
		        </form >
		        
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
		        <button type="button" class="btn btn-primary" onclick="document.getElementById('formPergunta').submit();">Salvar</button>
		      </div>
		      
		    </div>
		    
		  </div>
		</div>
            
            
            <table class="table table-striped table-bordered table-responsive mb-xl-0">
              <thead class="thead-light">
                  <tr>
                    <th scope="col" class="forum-col" style="margin-right: 500px;">
                    			Postagens
                    <button style="position: absolute; left: 83.8%; bottom: 66.8%;"  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="">Perguntar</button>
                    </th>
                  </tr>
              </thead>
              
              <tbody>
    			 <tr th:each="postagem : ${postagens}">
    			 
                  	<td>
	                    <h3 class="h5 mb-0">
	                    	<a href="#" data-bs-toggle="modal" th:data-bs-target="'#p' + ${postagem.id}" th:text="${postagem.titulo}"></a>
	                    </h3>
	                    <p class="mb-0" th:text="${postagem.conteudo}"></p>
	                    <p><strong>R: </strong><span class="mb-0" th:text="${postagem.resposta}"></span></p>
	                    
                    </td>
                    
		       <div class="modal fade" th:id="p + ${postagem.id}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
					  <div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header">
					        <h5 class="modal-title" id="staticBackdropLabel" th:text="${postagem.titulo}"></h5>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					      </div>
					    	  <div class="modal-body">
					    	  
					    	  <form th:id="formResposta + ${postagem.id}" method="get" th:action="@{/forum/salvar}">
		        				<input name="id" type="hidden" th:value="${postagem.id}">
			          
					          <div class="mb-3">
					            <label for="message-text" class="col-form-label">Resposta:</label>
					            <textarea name="resposta" class="form-control" id="message-text" th:text="${postagem.resposta}"></textarea>
					          </div>
					       
					   
					      </div>
					      <div class="modal-footer">
					        <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
					      </div>
					      
					       </form >
					    </div>
					  </div>
			     </div>
                   
                   
                   
                   
                 </tr>
              </tbody>
              
            </table>

        </div>
        
       
		
	</section>

<!-- O JS fica aqui para otimizar o carregamento da página.-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>    

</body>
</html>

